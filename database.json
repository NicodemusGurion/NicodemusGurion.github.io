---
layout: null
permalink: /database.json
---
{% capture string_with_newlines %}
{% assign wordList = ""  %}
{% assign skipWordList = "|the|be|is|are|to|of|and|a|in|that|have|I|it|for|not|on|with|as|you|do|at|this|but|his|by|from|they|we|saw|she|or|her|an|if|"  %}     
{% assign postCounter = 0 %}
"postlist": [
{% for post in site.posts  %}
{ "title": {{ post.title | jsonify }}, "url": {{ post.url | jsonify }}, "thumb": {{ post.thumb | jsonify }} }{% unless forloop.last %},{% endunless -%}
{%   assign content = post.title | append: " " | append: post.content %}
{%   assign words = content | strip_html | strip_newlines | slugify: "latin" | split: "-" %} 
{%   for word in words  %}
{%     assign invalidWordCheck = "|" | append: word | append: "|"   %}
{%     unless skipWordList contains invalidWordCheck %}
{%       assign wordKey = "[" | append: word | append: "]" %}
{%       unless wordList contains wordKey  %}
{%         assign wordList = wordList | append: wordKey | append: postCounter %}
{%       else %}
{%         assign splitWordList = wordList | split: wordKey %}
{%         assign wordList = splitWordList[0] | append: wordKey | append: postCounter | append: "," | append: splitWordList[1]  %}
{%       endunless %}
{%     endunless %}
{%   endfor %}
{% assign postCounter = postCounter | plus: 1 %}
{% endfor %}
], "searchdata": {
{% assign sections = wordList | split: "[" %}
{% for section in sections  %}
{%   unless section == "" %}
{%     assign wordAndList = section | split: "]" %}
{%     assign sectionWord = wordAndList[0] | strip %}
{{    sectionWord | jsonify }}: [ {{ wordAndList[1] | jsonify }}
]{% unless forloop.last %},{% endunless -%}
{%   endunless %}
{% endfor %}
}
{% endcapture %}
{ {{ string_with_newlines | strip_newlines | strip }} }
