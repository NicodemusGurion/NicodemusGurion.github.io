---
layout: null
permalink: /database.json
---
{{- site.time -}}
{% assign wordList = ""  %}
{% assign valList = "" %}
{% for post in site.posts  %}
{%   assign content = post.content | replace: "&nbsp;", " "  %}
{%   assign words = content | strip_html | strip_newlines | slugify: "latin" | split: "-" %} 
{%   for word in words  %}
{%     assign wordKey = "[" | append: word | append: "]" %}
{%     unless wordList contains wordKey  %}
{%       assign wordList = wordList | append: "[" | append: word | append: "]" | append: post.url %}
{%     else %}
{%       assign lookForWord = "[" | append: word | append: "]" %}
{%       assign splitWordList = wordList | split: lookForWord %}
{%       assign wordList = splitWordList[0] | append: lookForWord | append: post.url | append: "," | append: splitWordList[1]  %}
{%     endunless %}
{%   endfor %}
{%   break %}
{% endfor %}
{{- wordList -}}
{% assign sections = wordList | split: "[" %}
{% for section in sections  %}
{%   assign wordAndList = section | split: "]" %}
"{{ wordAndList[0] }}": [
{%   assign urls = wordAndList[1] | split: "," | sort %}
{%   assign uniqurls = urls | uniq %}
{%   for uniqurl in uniqurls %}
"{{    uniqurl }}": 
{%     assign thisUrlCount = 0 %}
{%     for url in urls %}
{%       if url == uniqurl %}
{%         assign thisUrlCount = thisUrlCount | plus: 1 %}
{%       endif %}
{%     endfor %}
{{     thisUrlCount }}
{%   endfor %}
]
{% endfor %}

