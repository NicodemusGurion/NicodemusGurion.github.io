---
layout: null
permalink: /database.json
---
{{- site.time -}}
{% capture string_with_newlines %}
{% assign wordList = ""  %}
{% for post in site.posts  %}
{%   assign content = post.title | append: " " | append: post.content %}
{%   assign words = content | strip_html | strip_newlines | slugify: "latin" | split: "-" %} 
{%   for word in words  %}
{%     assign wordKey = "[" | append: word | append: "]" %}
{%     unless wordList contains wordKey  %}
{%       assign post_id = post.title | append: "|" | append: post.url %}
{%       assign wordList = wordList | append: "[" | append: word | append: "]" | append: post_id %}
{%     else %}
{%       assign lookForWord = "[" | append: word | append: "]" %}
{%       assign splitWordList = wordList | split: lookForWord %}
{%       assign post_id = post.title | append: "|" | append: post.url %}
{%       assign wordList = splitWordList[0] | append: lookForWord | append: post_id | append: "," | append: splitWordList[1]  %}
{%     endunless %}
{%   endfor %}
{% endfor %}
{% assign sections = wordList | split: "[" %}
{% for section in sections  %}
{%   unless section == "" %}
{%     assign wordAndList = section | split: "]" %}
{%     assign sectionWord = wordAndList[0] | strip %}
"{{    sectionWord }}": [
{%     assign urls = wordAndList[1] | split: "," | sort %}
{%     assign uniqurls = urls | uniq %}
{%     for uniqurl in uniqurls %}
"{{      uniqurl }}": 
{%       assign thisUrlCount = 0 %}
{%       for url in urls %}
{%         if url == uniqurl %}
{%           assign thisUrlCount = thisUrlCount | plus: 1 %}
{%         endif %}
{%       endfor %}
{{       thisUrlCount }}{% unless forloop.last %},{% endunless -%}
{%     endfor %}
]{% unless forloop.last %},{% endunless -%}
{%   endunless %}
{% endfor %}
{% endcapture %}
{
{{ string_with_newlines | strip_newlines | strip }}
}
