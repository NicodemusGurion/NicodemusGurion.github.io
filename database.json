---
layout: null
permalink: /database.json
---
V4
{% assign searchdb = {} %}

{% for post in site.posts %}
  {% assign words = post.content | strip_html | replace: '&nbsp;', ' ' | split: ' ' %}
  {% for word in words %}
    {% unless word contains '<%' or word contains '{{' %}
      {% assign word = word | replace: ',', '' | replace: '.', '' | downcase %}
      {% if searchdb[word] == nil %}
        {% assign searchdb[word] = {} %}
      {% endif %}
      {% if searchdb[word][post.url] == nil %}
        {% assign searchdb[word][post.url] = 1 %}
      {% else %}
        {% assign searchdb[word][post.url] = searchdb[word][post.url] | plus: 1 %}
      {% endif %}
    {% endunless %}
  {% endfor %}
{% endfor %}

{
{% for word in searchdb %}
  "{{ word[0] }}": {
  {% for post in word[1] %}
    "{{ post[0] }}": {{ post[1] }}{% unless forloop.last %},{% endunless %}
  {% endfor %}
  }{% unless forloop.last %},{% endunless %}
{% endfor %}
}
